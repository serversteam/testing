<!DOCTYPE HTML>
<html>
<head>
   <title>Forms &amp; Actions &gt; Forms - Recipient management &gt; Forms &gt; Sending the last newsletter just after subscription</title>
   <meta name="generator" content="Help & Manual">
   <meta name="keywords" content="">
   <meta name="description" content="Sending the last newsletter just after subscription">
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

   <!-- This line forces IE8 into IE7 mode, safer until IE8 is better known -->
   <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />

   <link type="text/css" href="default.css" rel="stylesheet">
   <link type="text/css" href="custom.css" rel="stylesheet">
   <script type="text/javascript" src="nsh.js"></script>

<script type="text/javascript">   
// Toggle Toggler 

var toggleCount=false;
var switchState;

function toggleToggles() {

    if (!toggleCount) {
     toggleCount = true;
     HMToggleExpandAll(true);
     switchState = true;
     }
   
     else if (switchState) {
        HMToggleExpandAll(false);
        switchState = false;
        }
        
     else  {
        HMToggleExpandAll(true);
        switchState = true;
        } 
    }
</script>
   
<!-- non-scrolling headers for CHM and browser-based help, local styles-->
<style TYPE="text/css" media="screen"> 
   body {    
      margin:0; 
      padding:0; 
      overflow: auto; 
      background: #FFFFFF; 
   } 
   #idheader { 
      width:100%; 
      height:auto; 
      padding: 0; 
      margin: 0; 
} 

   #callout-table, #overview-table {display:block; position:relative; top:0; left:0;}
   #callout-icon {display:block; position:absolute; top:-11px; left:-11px;}
   #callout-icon-flag {display:block; position:absolute; top:-11px; left:-8px;}
   #callout-table a {text-decoration: none; color: blue;}
   #callout-table a:visited {text-decoration: none; color: blue;}
   #overview-table a {text-decoration: none; color: black;}
   #overview-table a:visited {text-decoration: none; color: black;}
   #callout-table a:hover, #overview-table a:hover {text-decoration: underline;}
   </style>
   
<style TYPE="text/css" MEDIA="print">
<!--
/* Hide navigation links and add space between header
     and text in the printed version. Not valid for eBooks. */
#idnav { display:none;	 }
.topichead { padding: 5px 5px 20px 5px; }
-->
</style>   
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "sending_the_last_newsletter_ju.htm");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body>
<!--ZOOMSTOP-->

<div id="idheader">
<table width="100%" border="0" cellspacing="0" cellpadding="0" style="margin: 0px;">
  <tr>
    <td align="left" class="topichead">
      <p class="crumbs" id="idnav">
        <a href="sites__actions.htm">Forms &amp; Actions</a> &gt; <a href="forms_-_recipient_management.htm">Forms - Recipient management</a> &gt; <a href="forms.htm">Forms</a>&nbsp;&gt;&nbsp;Sending the last newsletter just after subscription    
      </p>
    </td>
    <!-- td align="right" width="120" valign="middle" class="topichead" id="idnav">
        
        
          <a href="calling_up_the_registration_f2.htm" onmouseover="document.images.prev.src='btn_prev_h.gif'" onmouseout="document.images.prev.src='btn_prev_n.gif'">
          <img name=prev src="btn_prev_n.gif" border=0 alt="Previous page">
          </a>
        
        
        <a href="forms.htm" onmouseover="document.images.main.src='btn_home_h.gif'" onmouseout="document.images.main.src='btn_home_n.gif'">
        <img name=main src="btn_home_n.gif" border=0 alt="Return to chapter overview">
        </a>
        
          <a href="example_form_for_unsubscribing.htm" onmouseover="document.images.next.src='btn_next_h.gif'" onmouseout="document.images.next.src='btn_next_n.gif'">
          <img name=next src="btn_next_n.gif" border=0 alt="Next page">
          </a>
        
        
    </td -->
  </tr>
</table>

<!-- The following code displays Expand All/Collapse All links  below the header in topics containing toggles -->
  

</div>  



<div id="idcontent">
  <div id="innerdiv"> 
  <h4 class="p_Heading4"><span class="f_Heading4">Sending the last newsletter just after subscription</span></h4>

  <!--ZOOMRESTART-->
  <p>There is the possibility to send new subscribers the latest newsletter just after their subscription. The advantage is clear: In the moment of subscription, the person has a strong desire to get your newsletter. So why let him/her wait until the next issue when you can send the latest newsletter right away. If your latest newsletter was going to a specific target group, the new subscriber will only receive it, if he belongs to that target group.</p>
<p>The setup of this feature is quite easy: You just have to modify your existing action for subscription. Choose your action for subscription from the action overview and add the following points (it makes sense to change the description, so you can remember your change). In the section <span style="font-weight: bold; color: #006fb9;">Add step</span>, choose <span style="font-weight: bold; color: #006fb9;">Script-Action</span> and click on <span style="font-weight: bold; color: #006fb9;">Add</span>. Now copy the following code:</p>
<p class="p_BeispieltextQuelltext"><span class="f_BeispieltextQuelltext">#set($last=$ScriptHelper.findLastNewsletter($customerID, 1, &lt;mailinglistID&gt;))</span><br />
<span class="f_BeispieltextQuelltext">#set ($mail=$MailingDao.getMailing($last, 1))</span><br />
<span class="f_BeispieltextQuelltext">#if($mail) </span><br />
<span class="f_BeispieltextQuelltext">$mail.sendEventMailing($customerID.intValue(), 0, &quot;1&quot;, null, $ScriptHelper.getApplicationContext()) </span><br />
<span class="f_BeispieltextQuelltext">#end </span><br />
<span class="f_BeispieltextQuelltext">#set($scriptResult=&quot;1&quot;)</span></p>
<p>Click on <span style="font-weight: bold; color: #006fb9;">Save</span> and the action is activated. You may want to check your changes by subscribing a new address.</p>
<div class="p_ImageCaption"><div style="margin:0px auto 0px auto;width:937px;padding:0px 0px 0px 0px"><img src="a_simple_script_is_added.png" width="937" height="994" style="border:none" alt="Fig. 8.17: A simple script is added to the Subscribe action." title="Fig. 8.17: A simple script is added to the Subscribe action." /><p style="text-align:center"><span class="f_ImageCaption">Fig. 8.17: A simple script is added to the Subscribe action.</span></p></div></div>

  <!--ZOOMSTOP-->
  </div>
</div>

<script type="text/javascript"> 
<!-- 
var lastSlashPos = document.URL.lastIndexOf("/") >
document.URL.lastIndexOf("\\") ? document.URL.lastIndexOf("/") :
document.URL.lastIndexOf("\\");
if( document.URL.substring( lastSlashPos + 1, lastSlashPos + 4
).toLowerCase() != "~hh" )
{
    nsrInit();
}
--> 
</script> 
</body>
</html>
